<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>위습의 원더베리 시뮬레이션</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <style>
        .stats-header, .item-counts-box { border: 1px solid #ccc; border-radius: 8px; }
        .stats-header { background-color: #f8f8f8; }
        .item-counts-box { background-color: white; }
    </style>
    <script th:src="@{/js/wonder.js}" defer></script>
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<div id="draw-effect-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); z-index: 1000; justify-content: center; align-items: center;">

    <img id="effect-stage1-gif" th:src="@{/pet/using.gif}" style="width: 700px; height: 700px; position: absolute;">

    <div id="effect-stage2-reveal" style="display: none; text-align: center;">

        <img th:src="@{/pet/result.gif}" alt="Reveal Frame" style="width: 700px; height: 700px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">

        <img id="effect-item-image" src="" alt="Drawn Item Image" style="width: 40px; height: 40px; position: absolute; top: 52%; left: 50%; transform: translate(-50%, -50%); border-radius: 10px;">

        <p id="effect-item-name" style="position: absolute; top: 70%; left: 50%; transform: translateX(-50%); color: white; font-size: 32px; font-weight: 900; text-shadow: 0 0 10px black;"></p>

        <button id="close-effect-btn" style="position: absolute; top: 85%; left: 50%; transform: translateX(-50%); padding: 10px 30px; background-color: #f39c12; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 18px;">닫기</button>

    </div>
</div>

<main style="text-align: center; margin-top: 40px;">
    <h2>🎲 위습의 원더베리 시뮬레이터</h2>

    <div class="stats-header" style="margin: 20px auto; padding: 15px; width: 600px; display: flex; justify-content: space-around;">
        <div style="font-size: 1.1rem; font-weight: bold;">사용개수: <span id="stat-count">0</span>개</div>
        <div style="font-size: 1.1rem; font-weight: bold; color: #4CAF50;">누적금액: <span id="stat-cost">0</span>원</div>
    </div>

    <div class="item-counts-box" style="margin: 20px auto; padding: 20px; width: 600px; text-align: left;">

        <h3 style="margin-top: 0; text-align: center;">아이템 획득 통계</h3>

        <div style="display: flex; justify-content: space-around; margin-bottom: 10px; text-align: center;">
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/크림.gif}" alt="크림 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div style="font-weight: bold; color: #DAA520;">크림: <span id="item-크림">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/샤샤.gif}" alt="샤샤 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div style="font-weight: bold; color: #DAA520;">샤샤: <span id="item-샤샤">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/팬디.gif}" alt="팬디 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div style="font-weight: bold; color: #DAA520;">팬디: <span id="item-팬디">0</span>회</div>
            </div>
        </div>

        <hr style="border-top: 1px dashed #eee;">

        <div style="display: flex; justify-content: space-around; margin-bottom: 10px; text-align: center;">
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/고농축프리미엄생명의물.gif}" alt="생명의 물 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>고농축 프리미엄 생명의 물: <span id="item-고농축프리미엄생명의물">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/오가닉원더쿠키.gif}" alt="원더 쿠키 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>오가닉 원더 쿠키: <span id="item-오가닉원더쿠키">0</span>회</div>
            </div>
        </div>

        <div style="display: flex; justify-content: space-around; text-align: center;">
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/식빵이.gif}" alt="식빵이 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>식빵이: <span id="item-식빵이">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/빵둘기.gif}" alt="빵둘기 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>빵둘기: <span id="item-빵둘기">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/제키.gif}" alt="제키 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>제키: <span id="item-제키">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/제나.gif}" alt="제나 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>제나: <span id="item-제나">0</span>회</div>
            </div>
            <div class="item-stat-wrapper">
                <img th:src="@{/pet/제리.gif}" alt="제리 아이콘" style="width: 32px; height: 32px; display: block; margin: 0 auto 5px auto;">
                <div>제리: <span id="item-제리">0</span>회</div>
            </div>
        </div>
    </div>

    <div id="result-box" class="result-box" style="margin-top: 30px;">
        🎁 뽑은 아이템: <span id="result-item" style="font-weight: bold; color: #3498db;">-</span>
    </div>

    <div class="cube-btn-group">
        <button id="use-btn" class="cube-btn">1회 사용</button>
        <button id="use10-btn" class="cube-btn">10회 사용</button>
        <button id="reset-btn" class="cube-btn">초기화</button>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>